import React, { useState, useEffect, useRef } from 'react';
import { Sparkles, Calendar, Video, Award, Clapperboard, Users, Heart } from 'lucide-react';

export default function App() {
  const [mousePosition, setMousePosition] = useState({ x: 0, y: 0 });
  // Alterado de 'popcorns' para 'particles' para suportar pipocas e brilhos
  const [particles, setParticles] = useState([]);
  const [timeLeft, setTimeLeft] = useState({ days: 0, hours: 0, minutes: 0, seconds: 0 });
  
  // Data alvo (fict√≠cia para demonstra√ß√£o da contagem)
  const targetDate = new Date(Date.now() + 30 * 24 * 60 * 60 * 1000).toISOString(); 

  const containerRef = useRef(null);

  // Efeito de Holofote (Segue o mouse)
  useEffect(() => {
    const handleMouseMove = (e) => {
      if (containerRef.current) {
        const rect = containerRef.current.getBoundingClientRect();
        setMousePosition({
          x: e.clientX - rect.left,
          y: e.clientY - rect.top,
        });
      }
    };
    window.addEventListener('mousemove', handleMouseMove);
    return () => window.removeEventListener('mousemove', handleMouseMove);
  }, []);

  // Contagem Regressiva
  useEffect(() => {
    const timer = setInterval(() => {
      const difference = +new Date(targetDate) - +new Date();
      
      if (difference > 0) {
        setTimeLeft({
          days: Math.floor(difference / (1000 * 60 * 60 * 24)),
          hours: Math.floor((difference / (1000 * 60 * 60)) % 24),
          minutes: Math.floor((difference / 1000 / 60) % 60),
          seconds: Math.floor((difference / 1000) % 60),
        });
      }
    }, 1000);

    return () => clearInterval(timer);
  }, [targetDate]);

  // Fun√ß√£o unificada para Celebrar (Pipocas + Brilhos)
  const handleCelebration = () => {
    // Cria 25 part√≠culas de uma vez (mistura de pipoca e brilhos)
    const newParticles = Array.from({ length: 25 }).map((_, i) => {
      const isPopcorn = Math.random() > 0.4; // 60% pipoca, 40% brilho
      const content = isPopcorn 
        ? 'üçø' 
        : ['‚ú®', '‚≠ê', 'üí´', 'üî∂'][Math.floor(Math.random() * 4)];
      
      return {
        id: Date.now() + i,
        left: Math.random() * 90 + 5, // posi√ß√£o horizontal
        animationDuration: 1.5 + Math.random() * 2.5, // velocidade vari√°vel
        rotation: Math.random() * 360,
        size: isPopcorn ? (2 + Math.random() * 1.5) : (1.5 + Math.random() * 2),
        content,
        isGlowing: !isPopcorn // Brilhos ganham efeito neon
      };
    });
    
    setParticles(prev => [...prev, ...newParticles]);

    // Limpeza autom√°tica
    setTimeout(() => {
      setParticles(prev => prev.filter(p => !newParticles.find(np => np.id === p.id)));
    }, 4500);
  };

  return (
    <div 
      ref={containerRef}
      className="min-h-screen bg-[#050505] text-neutral-100 flex flex-col relative overflow-hidden font-sans selection:bg-yellow-600 selection:text-black"
    >
      {/* Importa√ß√£o de Fontes via Style Tag */}
      <style>{`
        @import url('https://fonts.googleapis.com/css2?family=Cinzel:wght@400;700;900&family=Montserrat:wght@300;400;600&display=swap');
        
        .font-cinzel { font-family: 'Cinzel', serif; }
        .font-montserrat { font-family: 'Montserrat', sans-serif; }
        
        @keyframes fall {
          0% { top: -50px; transform: rotate(0deg) scale(0.5); opacity: 1; }
          50% { opacity: 1; }
          100% { top: 110vh; transform: rotate(720deg) scale(1); opacity: 0; }
        }
        .animate-fall {
          animation-name: fall;
          animation-timing-function: linear;
          animation-fill-mode: forwards;
        }
        @keyframes fade-in-up {
          0% { opacity: 0; transform: translateY(20px); }
          100% { opacity: 1; transform: translateY(0); }
        }
        .animate-fade-in-up {
          animation: fade-in-up 1s ease-out forwards;
        }
        
        /* Shimmer effect for the ticket */
        @keyframes shimmer {
          100% { transform: translateX(100%); }
        }
        .shimmer-effect::after {
          content: '';
          position: absolute;
          top: 0;
          left: 0;
          width: 100%;
          height: 100%;
          background: linear-gradient(90deg, transparent, rgba(255,215,0,0.2), transparent);
          transform: translateX(-100%);
          animation: shimmer 2s infinite;
        }
      `}</style>

      {/* Camada de Ru√≠do (Noise Texture) */}
      <div className="absolute inset-0 opacity-10 pointer-events-none" style={{ backgroundImage: `url("data:image/svg+xml,%3Csvg viewBox='0 0 200 200' xmlns='http://www.w3.org/2000/svg'%3E%3Cfilter id='noiseFilter'%3E%3CfeTurbulence type='fractalNoise' baseFrequency='0.65' numOctaves='3' stitchTiles='stitch'/%3E%3C/filter%3E%3Crect width='100%25' height='100%25' filter='url(%23noiseFilter)' opacity='0.05'/%3E%3C/svg%3E")` }}></div>

      {/* Holofote Interativo */}
      <div 
        className="pointer-events-none absolute inset-0 z-0 transition-opacity duration-300"
        style={{
          background: `radial-gradient(800px circle at ${mousePosition.x}px ${mousePosition.y}px, rgba(255, 215, 0, 0.06), transparent 40%)`
        }}
      />

      {/* Raios Dourados Superiores */}
      <div className="absolute top-0 left-1/2 -translate-x-1/2 w-full h-[50vh] bg-gradient-to-b from-yellow-600/10 to-transparent blur-3xl -z-10"></div>

      <main className="flex-grow flex flex-col items-center justify-center p-4 z-10 w-full max-w-5xl mx-auto text-center space-y-10">
        
        {/* Cabe√ßalho de Manuten√ß√£o */}
        <div className="space-y-6 animate-fade-in-up w-full">
          <div className="inline-flex items-center gap-3 px-6 py-2 rounded-full border border-yellow-500/30 bg-black/40 text-yellow-500 text-xs md:text-sm font-bold tracking-[0.2em] uppercase mb-4 backdrop-blur-sm shadow-[0_0_15px_rgba(234,179,8,0.2)]">
            <Sparkles className="w-4 h-4 animate-pulse text-yellow-300" />
            Em Manuten√ß√£o
            <Sparkles className="w-4 h-4 animate-pulse text-yellow-300" />
          </div>
          
          <h1 className="font-cinzel text-5xl md:text-7xl lg:text-8xl font-black tracking-tight leading-none">
            <span className="block text-white/90 mb-2 drop-shadow-xl">GRANDE</span>
            <span className="bg-clip-text text-transparent bg-gradient-to-b from-[#cfc09f] via-[#ffecb3] to-[#3a2c0f] drop-shadow-[0_4px_10px_rgba(255,215,0,0.3)]">
              ESTR√âIA
            </span>
          </h1>
        </div>

        {/* Card Principal */}
        <div className="relative p-1 w-full max-w-4xl">
          {/* Borda Dourada Brilhante */}
          <div className="absolute inset-0 bg-gradient-to-r from-transparent via-yellow-600/50 to-transparent opacity-60 blur-sm"></div>
          
          <div className="relative bg-[#0a0a0a]/90 border-y border-yellow-500/30 backdrop-blur-xl p-8 md:p-12 rounded-xl shadow-2xl space-y-10 overflow-hidden">
            
            {/* Se√ß√£o da Data (Ticket) */}
            <div className="space-y-6">
              <h2 className="font-montserrat text-sm md:text-base text-gray-400 uppercase tracking-[0.4em]">
                Aguardar Data
              </h2>
              
              <div 
                className="relative inline-block group cursor-pointer"
                onClick={handleCelebration}
              >
                <div className="absolute inset-0 bg-yellow-500 blur-xl opacity-20 group-hover:opacity-40 transition-duration-500"></div>
                <div className="relative bg-black border border-yellow-500/60 px-8 py-4 md:px-12 md:py-6 overflow-hidden shimmer-effect shadow-lg transform transition hover:scale-105 active:scale-95 duration-300">
                  <div className="flex items-center justify-center gap-4 text-3xl md:text-5xl font-cinzel font-bold text-white">
                     <Calendar className="w-8 h-8 md:w-10 md:h-10 text-yellow-500" />
                     <span>XX / XX / XXXX</span>
                  </div>
                  <p className="text-[10px] text-yellow-500 uppercase tracking-[0.4em] mt-3 font-montserrat">Save the Date</p>
                </div>
              </div>
            </div>

            <div className="h-px w-2/3 mx-auto bg-gradient-to-r from-transparent via-yellow-800 to-transparent"></div>

            {/* Descri√ß√£o do Evento */}
            <div className="space-y-8">
              <div className="flex flex-col md:flex-row items-center justify-center gap-3 text-red-500 animate-pulse">
                <div className="flex items-center gap-2">
                    <Video className="w-6 h-6" />
                    <span className="font-cinzel font-bold tracking-wider text-xl">REACT AO VIVO</span>
                </div>
              </div>
              
              <p className="font-montserrat text-lg md:text-2xl text-gray-200 leading-relaxed max-w-3xl mx-auto">
                COM <span className="text-yellow-400 font-bold">TODAS AS CONVIDADAS</span> PRESENTES NO <br className="hidden md:block"/>
                <span className="inline-flex items-center gap-2 mt-2 px-3 py-1 rounded bg-blue-900/30 text-blue-200 border border-blue-500/30 font-bold text-base">
                    GOOGLE MEET
                </span>
              </p>

              {/* Grid de √çcones e Texto */}
              <div className="grid grid-cols-1 md:grid-cols-3 gap-6 text-sm text-yellow-100/90 mt-8 pt-8 border-t border-white/5">
                <div className="flex flex-col items-center gap-3 p-4 hover:bg-white/5 rounded-lg transition-colors group">
                  <span className="text-4xl drop-shadow-md group-hover:scale-110 transition-transform duration-300">üçø</span>
                  <span className="font-cinzel font-bold tracking-widest text-center">PREPARE SUA<br/>PIPOCA</span>
                </div>
                <div className="flex flex-col items-center gap-3 p-4 hover:bg-white/5 rounded-lg transition-colors group">
                  <div className="bg-gray-800 p-2 rounded-full group-hover:bg-yellow-900/40 transition-colors">
                      <Users className="w-8 h-8 text-yellow-500" />
                  </div>
                  <span className="font-cinzel font-bold tracking-widest text-center">CHAME SEUS FAMILIARES<br/>E AMIGOS</span>
                </div>
                <div className="flex flex-col items-center gap-3 p-4 hover:bg-white/5 rounded-lg transition-colors group">
                  <div className="bg-gray-800 p-2 rounded-full group-hover:bg-yellow-900/40 transition-colors">
                      <Heart className="w-8 h-8 text-yellow-500" />
                  </div>
                  <span className="font-cinzel font-bold tracking-widest text-center">N√ÉO SE ESQUE√áA<br/>DOS LEN√áOS</span>
                </div>
              </div>
            </div>
          </div>
        </div>

        {/* Bot√£o Interativo Principal */}
        <button 
          onClick={handleCelebration}
          className="group relative px-10 py-5 bg-gradient-to-r from-red-800 to-red-600 text-white font-cinzel font-bold tracking-wider uppercase rounded-full shadow-[0_0_30px_rgba(185,28,28,0.4)] hover:shadow-[0_0_50px_rgba(220,38,38,0.6)] hover:scale-105 transition-all duration-300 active:scale-95 overflow-hidden border border-red-400/50"
        >
          <span className="relative z-10 flex items-center gap-3 text-lg">
            <Clapperboard className="w-6 h-6 group-hover:-rotate-12 transition-transform" />
            Celebrar Estreia
          </span>
          <div className="absolute inset-0 bg-gradient-to-r from-yellow-400/20 to-transparent opacity-0 group-hover:opacity-100 transition-opacity duration-300"></div>
        </button>

      </main>

      {/* Footer / Red Carpet */}
      <footer className="w-full bg-gradient-to-t from-red-950 via-red-900/20 to-transparent pt-12 pb-8 px-6 mt-auto">
        <div className="max-w-4xl mx-auto flex flex-col md:flex-row justify-between items-center text-red-200/40 text-xs font-montserrat tracking-widest uppercase">
          <div className="flex items-center gap-2 mb-4 md:mb-0">
            <Award className="w-4 h-4" />
            <span>Sele√ß√£o Oficial {new Date().getFullYear()}</span>
          </div>
          <p>¬© Grande Estreia Productions.</p>
        </div>
      </footer>

      {/* Container de Anima√ß√£o de Part√≠culas */}
      {particles.map((particle) => (
        <div
          key={particle.id}
          className="fixed pointer-events-none z-50 animate-fall"
          style={{
            left: `${particle.left}%`,
            fontSize: `${particle.size}rem`,
            top: '-50px',
            transform: `rotate(${particle.rotation}deg)`,
            animationDuration: `${particle.animationDuration}s`,
            // Adiciona brilho neon extra se n√£o for pipoca
            textShadow: particle.isGlowing ? '0 0 10px gold, 0 0 20px orange' : 'none',
            filter: particle.isGlowing ? 'brightness(1.5)' : 'none'
          }}
        >
          {particle.content}
        </div>
      ))}
    </div>
  );
}
